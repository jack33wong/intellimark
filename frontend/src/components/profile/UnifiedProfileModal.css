/* Base Variables - Matching Manus Dark Theme */
:root {
    --modal-bg: var(--background-menu-white);
    --modal-border: var(--border-main);
    --sidebar-width: 200px;
    /* Slightly narrower sidebar based on screenshot */
    /* Use global text variables */
    --accent-color: var(--text-primary);
    /* Using white for active state icon/text like screenshot */
    --radius-lg: 12px;
    --radius-md: 8px;
}

.unified-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    /* Semi-transparent black */
    backdrop-filter: blur(2px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    animation: fadeIn 0.2s ease-out;
}

.unified-modal {
    background: var(--modal-bg);
    width: 60%;
    height: 60%;
    border-radius: var(--radius-lg);
    border: 1px solid var(--modal-border);
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    position: relative;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color: var(--text-primary);
}

/* Header */
.unified-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    background: var(--modal-bg);
    /* Match modal background */
    /* border-bottom: 1px solid var(--modal-border); -- Removed to match clean look if desired, or keep light separator */
    border-bottom: none;
    /* Screenshot looks clean */
}

/* Screenshot has logo/brand top left? Or just "Account"? 
   The Manus screenshot shows "manus" logo top left in sidebar.
   Our modal header title "User Profile Settings" might be better placed or removed if sidebar takes over.
   Let's keep text title for now but match style.
*/
.unified-modal-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    /* Subtle header */
}

.unified-modal-close {
    background: none;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
}

.unified-modal-close:hover {
    color: var(--text-primary);
}

/* Body */
.unified-modal-body {
    display: flex;
    flex: 1;
    overflow: hidden;
    border-top: 1px solid var(--modal-border);
    /* Separator between header and body */
}

/* Sidebar */
.unified-sidebar {
    width: var(--sidebar-width);
    background: var(--modal-bg);
    border-right: 1px solid var(--modal-border);
    padding: 12px;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.unified-sidebar-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    color: var(--text-secondary);
    cursor: pointer;
    transition: all 0.2s;
    font-size: 13px;
    font-weight: 400;
    text-decoration: none;
    border: none;
    background: none;
    width: 100%;
    text-align: left;
    border-radius: 6px;
}

.unified-sidebar-item:hover {
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
}

.unified-sidebar-item.active {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    /* font-weight: 500; */
}

.unified-sidebar-item svg {
    width: 16px;
    height: 16px;
    opacity: 0.8;
}

.unified-sidebar-item.active svg {
    opacity: 1;
}

/* Content */
.unified-content {
    flex: 1;
    padding: 24px 32px;
    overflow-y: auto;
    background: var(--modal-bg);
    /* Same bg as sidebar */
}

/* Scrollbar styles to match dark theme */
.unified-content::-webkit-scrollbar {
    width: 8px;
}

.unified-content::-webkit-scrollbar-track {
    background: transparent;
}

.unified-content::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
}

/* Section specific overrides */
.section-title {
    font-size: 16px;
    font-weight: 500;
    margin-bottom: 24px;
    color: var(--text-primary);
    display: none;
    /* Hide internal titles if not needed, as layout is clean */
}

/* If we want to show title inside: */
/* .unified-content h2 { ... } */

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: scale(0.98);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Mobile */
@media (max-width: 640px) {
    .unified-modal {
        width: 100%;
        height: 100%;
        border-radius: 0;
        border: none;
    }

    .unified-modal-body {
        flex-direction: column;
    }

    .unified-sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid var(--modal-border);
        flex-direction: row;
        overflow-x: auto;
        padding: 8px;
    }
}

/* Settings Page Styles */
.settings-page {
    padding: 0;
    max-width: 100%;
}

.settings-page-header {
    margin-bottom: 32px;
}

.settings-page-title {
    font-size: 24px;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

/* Settings Section */
.settings-section {
    margin-bottom: 40px;
}

.settings-section-title {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary, #9ca3af);
    margin: 0 0 20px 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Settings Item */
.settings-item {
    margin-bottom: 24px;
}

.settings-item-label {
    display: block;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
    margin-bottom: 12px;
}

/* Theme Options Container */
/* Theme Selection */
.theme-options {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    max-width: 450px;
    /* Constrain width instead of padding-right */
}

.theme-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: transparent;
    border: none;
    padding: 0;
    cursor: pointer;
    transition: all 0.2s ease;
    width: 100%;
    margin: 0;
}

.theme-preview {
    width: 100%;
    height: 60px;
    border-radius: 8px;
    border: 1px solid var(--modal-border);
    background: var(--background-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    transition: all 0.2s ease;
    color: var(--text-secondary);
    position: relative;
}

.theme-option.active .theme-preview {
    border-color: var(--text-brand, #8b5cf6) !important;
    background-color: rgba(139, 92, 246, 0.1) !important;
    color: var(--text-brand, #8b5cf6) !important;
}

.theme-option:hover .theme-preview {
    border-color: rgba(139, 92, 246, 0.4);
}

.light-preview {
    background: linear-gradient(135deg, #ffffff 0%, #f3f4f6 100%);
    color: #4b5563;
}

.dark-preview {
    background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
    color: #ffffff;
}

.system-preview {
    background: linear-gradient(135deg, #ffffff 0%, #111827 100%);
    color: #ffffff;
}

.theme-option-label {
    margin-top: 8px;
    font-size: 12px;
    font-weight: 500;
    color: var(--text-secondary);
    text-align: center;
}

.theme-option.active .theme-option-label {
    color: var(--text-primary);
}

/* Old Settings Styles - Keep for backward compatibility */
.settings-subsection {
    margin-bottom: 20px;
}

.settings-label {
    display: block;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Usage Section Styles */
.usage-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    gap: 20px;
}

.usage-summary-box {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--modal-border);
    border-radius: var(--radius-md);
    padding: 20px;
}

.usage-plan-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.usage-plan-name {
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
}

.usage-upgrade-btn {
    background: var(--text-primary);
    color: var(--modal-bg);
    /* Adaptive text color */
    border: none;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.2s;
}

.usage-upgrade-btn:hover {
    opacity: 0.9;
}

.usage-stat-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    font-size: 13px;
}

.usage-stat-row:last-child {
    margin-bottom: 0;
}

.usage-stat-label {
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    gap: 8px;
}

.usage-stat-value {
    color: var(--text-primary);
    font-family: monospace;
    /* number alignment */
}

.usage-history-container {
    padding-bottom: 8px;
    background: rgba(0, 0, 0, 0.1);
}

.usage-list-subitem {
    display: grid;
    grid-template-columns: 2fr 1.5fr 1fr;
    padding: 8px 0 8px 48px;
    font-size: 13px;
    color: var(--text-secondary);
    border-bottom: 1px solid rgba(255, 255, 255, 0.03);
    position: relative;
    align-items: center;
}

.usage-list-subitem::before {
    content: '';
    position: absolute;
    left: 28px;
    top: 0;
    bottom: 0;
    width: 1px;
    background: rgba(255, 255, 255, 0.15);
}

.usage-list-subitem:last-child::before {
    bottom: 50%;
}

.usage-list-subitem::after {
    content: '';
    position: absolute;
    left: 28px;
    top: 50%;
    width: 12px;
    height: 1px;
    background: rgba(255, 255, 255, 0.15);
}

.usage-subitem-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.usage-subitem-mode {
    font-weight: 500;
    color: var(--text-primary);
    opacity: 0.9;
}

.usage-subitem-model {
    font-size: 11px;
    color: var(--text-secondary);
    opacity: 0.8;
}

.usage-row-toggle {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
}

.usage-chevron {
    opacity: 0.5;
    transition: transform 0.2s;
}

.usage-chevron:hover {
    opacity: 1;
}

/* Account Section Styles */
.account-container {
    display: flex;
    flex-direction: column;
    gap: 32px;
}

.profile-card {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 24px;
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--modal-border);
    border-radius: var(--radius-lg);
}

.profile-avatar-large {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    background: #333;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    color: var(--text-secondary);
    border: 2px solid rgba(255, 255, 255, 0.1);
}

.profile-avatar-large img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.profile-info-primary {
    flex: 1;
}

.profile-display-name {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.profile-email-text {
    color: var(--text-secondary);
    font-size: 14px;
}

.account-actions {
    display: flex;
    gap: 12px;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    border-radius: 6px;
    border: 1px solid var(--modal-border);
    background: transparent;
    color: var(--text-primary);
    font-size: 13px;
    cursor: pointer;
    transition: all 0.2s;
}

.action-btn:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: rgba(255, 255, 255, 0.2);
}

.action-btn.primary {
    background: var(--modal-bg);
    color: #000;
    border-color: var(--text-primary);
}

.action-btn.primary:hover {
    opacity: 0.9;
}

.action-btn.danger {
    color: white;
    border-color: rgba(239, 68, 68, 0.2);
}

.action-btn.danger:hover {
    background: rgba(239, 68, 68, 0.1);
}

.account-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.form-label {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-secondary);
}

.form-input {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--modal-border);
    border-radius: 6px;
    padding: 10px 12px;
    color: var(--text-primary);
    font-size: 14px;
    transition: border-color 0.2s;
}

.form-input:focus {
    outline: none;
    border-color: var(--text-secondary);
}

.form-input:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

.account-details-grid {
    display: grid;
    grid-template-columns: 120px 1fr;
    gap: 16px 24px;
    align-items: center;
}

.detail-label {
    color: var(--text-secondary);
    font-size: 14px;
}

.detail-value {
    color: var(--text-primary);
    font-size: 14px;
}

.usage-details-list {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.usage-list-header {
    display: grid;
    grid-template-columns: 2fr 1.5fr 1fr;
    padding: 8px 0;
    color: var(--text-secondary);
    font-size: 12px;
    border-bottom: 1px solid var(--modal-border);
    margin-bottom: 8px;
}

.usage-list-scroll {
    flex: 1;
    overflow-y: auto;
}

.usage-list-item {
    display: grid;
    grid-template-columns: 2fr 1.5fr 1fr;
    padding: 10px 0;
    font-size: 13px;
    color: var(--text-primary);
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.usage-list-item:last-child {
    border-bottom: none;
}

.usage-list-date {
    color: var(--text-secondary);
    font-size: 12px;
}

.usage-list-credits {
    text-align: right;
    font-family: monospace;
    padding-right: 25px;
}

/* Plan Section Styles */
.plan-container {
    display: flex;
    flex-direction: column;
    gap: 24px;
    height: 100%;
}

.plan-loading {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-secondary);
    font-size: 14px;
}

.plan-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    gap: 16px;
    padding: 32px;
}

.plan-icon-large {
    color: var(--text-secondary);
    opacity: 0.5;
}

.plan-header-card {
    background: rgba(255, 255, 255, 0.05);
    /* Slightly lighter than modal bg */
    border: 1px solid var(--modal-border);
    border-radius: var(--radius-md);
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.plan-title-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.plan-identity {
    display: flex;
    align-items: center;
    gap: 10px;
}

.plan-crown-icon {
    color: var(--text-secondary);
}

.plan-name {
    font-size: 18px;
    font-weight: 600;
    color: var(--text-primary);
}

.plan-status-badge {
    display: flex;
    align-items: center;
    gap: 6px;
    gap: 6px;
    background: rgba(125, 125, 125, 0.15);
    /* Adaptive badge bg */
    border: 1px solid var(--modal-border);
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 13px;
    color: var(--text-primary);
}

.plan-details-grid {
    display: grid;
    gap: 16px;
    background: rgba(125, 125, 125, 0.08);
    /* Adaptive bg for both modes */
    padding: 24px;
    border-radius: var(--radius-md);
    border: 1px solid var(--modal-border);
}

.plan-detail-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 4px 0;
}

.plan-detail-label {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--text-primary);
    font-size: 13px;
    font-weight: 500;
    letter-spacing: 0.5px;
    text-transform: uppercase;
}

.plan-detail-label svg {
    opacity: 0.7;
}

.plan-detail-value {
    color: var(--text-primary);
    font-family: inherit;
    font-size: 14px;
    font-weight: 500;
}

.plan-interval {
    color: var(--text-secondary);
    font-size: 13px;
    font-weight: 400;
}

.credits-negative {
    color: #ef4444;
    /* Red for negative/low if desired, user screenshot shows yellow/orange logic potentially */
    color: #fbbf24;
    /* Match screenshot yellow for -1664 example */
    font-weight: 600;
}

.credits-total {
    color: var(--text-secondary);
}

.plan-warning-box {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px;
    background: rgba(239, 68, 68, 0.1);
    border: 1px solid rgba(239, 68, 68, 0.2);
    border-radius: var(--radius-md);
    color: #fca5a5;
    font-size: 13px;
}

.manage-subscription-btn {
    margin-top: auto;
    width: 100%;
    padding: 12px;
    background: var(--text-primary);
    border: 1px solid var(--modal-border);
    border-radius: var(--radius-md);
    color: var(--modal-bg);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
}

.manage-subscription-btn:hover {
    background: var(--text-tertiary);
    border-color: var(--text-secondary);
}

/* Model Option Styles */
.model-options-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.model-option-btn {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background: transparent;
    border: 1px solid var(--modal-border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    width: 100%;
    margin: 0;
}

.model-option-btn:hover {
    background: rgba(255, 255, 255, 0.03);
    border-color: rgba(255, 255, 255, 0.2);
}

.model-option-btn.active {
    background: rgba(139, 92, 246, 0.1);
    /* Brand color hint */
    border-color: var(--text-brand, #8b5cf6);
}

.model-info {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 2px;
}

.model-name {
    font-size: 14px;
    font-weight: 500;
    color: var(--text-primary);
}

.model-id {
    font-size: 11px;
    color: var(--text-secondary);
}

.check-icon {
    color: var(--text-brand, #8b5cf6);
    display: flex;
    align-items: center;
    justify-content: center;
}


/* Horizontal Model Options Update */
.model-options-container {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    /* Force 3 columns */
    gap: 12px !important;
    flex-direction: row !important;
}

.model-option-btn {
    flex-direction: column !important;
    align-items: flex-start !important;
    justify-content: flex-start !important;
    padding: 12px !important;
    height: 80px !important;
    /* Fixed height for consistency */
    position: relative !important;
}

.model-info {
    width: 100%;
}

.model-name {
    font-size: 13px !important;
    margin-bottom: 4px !important;
    display: block !important;
}

.model-id {
    font-size: 10px !important;
    opacity: 0.6 !important;
    display: block !important;
}

/* Position check icon in top-right corner */
.model-option-btn .check-icon {
    position: absolute !important;
    top: 6px !important;
    right: 6px !important;
    width: 16px !important;
    height: 16px !important;
}

/* Make Grid Auto-Fit for better compactness */
.model-options-container {
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)) !important;
}